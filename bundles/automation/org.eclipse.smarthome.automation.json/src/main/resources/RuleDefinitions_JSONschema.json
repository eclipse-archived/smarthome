{  
  "$schema":"http://json-schema.org/draft-04/schema#",
  "title":"Automation Rule Definitions",
  "description":"This schema is used for verification of JSON objects used for creation of Automation Rule Objects.",
  "type":"array",
  "minItems":1,
  "items":{  
    "oneOf":[  
      {  
        "type":"object",
        "title":"Rule",
        "description":"Rule Definition",
        "additionalProperties":false,
        "required":[  
          "uid",
          "on",
          "then"
        ],
        "properties":{  
          "uid":{  
            "type":"string",
            "title":"Rule uid",
            "description":"Short (one word) user friendly description of the Rule. It must be unique."
          },
          "tags":{  
            "type":"array",
            "title":"Rule Tags",
            "description":"Non-hierarchical keywords or terms describing the Rule. They help to classify the rules and allow them to be found.",
            "minItems":1,
            "items":{  
              "type":"string"
            }
          },
          "description":{  
            "type":"string",
            "title":"Rule Description",
            "description":"A brief description of what the rule is and for what it is used."
          },
          "active":{  
            "type":"boolean",
            "title":"State",
            "description":"Shows if the pule is in active state or not.",
            "default":true
          },
          "config":{  
            "type":"object",
            "title":"Rule Configurations",
            "description":"Used to configure the Rule. Contains pairs of Configuration Property's name and its value."
          },
          "on":{  
            "type":"array",
            "minItems":1,
            "title":"ON Section",
            "description":"Contains definitions of the Trigger Modules of the Rule.",
            "items":{  
              "oneOf":[  
                {  
                  "type":"object",
                  "title":"Trigger Module",
                  "description":"Defines the fact which triggers the Rule execution.",
                  "additionalProperties":false,
                  "required":[  
                    "id",
                    "template.uid"
                  ],
                  "properties":{  
                    "id":{  
                      "type":"string",
                      "title":"Trigger id",
                      "description":"Identifies uniquely the Module in scope of the Rule."
                    },
                    "template.uid":{  
                      "type":"string",
                      "title":"Trigger Template uid",
                      "description":"Identifies the Template used for creation of the Trigger."
                    },
                    "label":{  
                      "type":"string",
                      "title":"Trigger Label",
                      "description":"Short(one word) user friendly description of the Trigger."
                    },
                    "description":{  
                      "type":"string",
                      "title":"Trigger Designation",
                      "description":"A brief description of what the Trigger is and for what it is used."
                    },
                    "config":{  
                      "type":"object",
                      "title":"Trigger Configurations",
                      "description":"Used to configure the Trigger. Contains pairs of Configuration Property's name and its value."
                    },
                    "output":{  
                      "type":"object",
                      "title":"Trigger Output",
                      "description":"Contains pairs of Output id and Output reference. The reference defines what part of a complex data has to be used as value of this output."
                    }
                  }
                },
                {  
                  "type":"object",
                  "title":"Trigger Module",
                  "description":"Defines the fact which triggers the Rule execution.",
                  "additionalProperties":false,
                  "required":[  
                    "id"
                  ],
                  "properties":{  
                    "id":{  
                      "type":"string",
                      "title":"Trigger id",
                      "description":"Identifies uniquely the Module in scope of the Rule."
                    },
                    "label":{  
                      "type":"string",
                      "title":"Trigger Label",
                      "description":"Short(one word) user friendly description of the Trigger."
                    },
                    "description":{  
                      "type":"string",
                      "title":"Trigger Designation",
                      "description":"A brief description of what the Trigger is and for what it is used."
                    },
                    "config":{  
                      "type":"object",
                      "title":"Trigger Configurations",
                      "description":"Used to configure the Trigger. Contains meta info of Configuration Property and its value.",
                      "additionalProperties":false,
                      "patternProperties":{  
                        "[A-Za-z0-9]+":{  
                          "type":"object",
                          "title":"Trigger Configuration Property",
                          "description":"Used to configure the Trigger. Contains type of Configuration Property and its value.",
                          "required":[  
                            "type",
                            "value"
                          ],
                          "properties":{  
                            "type":{  
                              "type":"string",
                              "title":"Configuration Property Type",
                              "description":"Fully qualified name of Java class."
                            },
                            "label":{  
                              "type":"string",
                              "title":"Configuration Property Label",
                              "description":"Short(one word) user friendly description of the Configuration Property."
                            },
                            "description":{  
                              "type":"string",
                              "title":"Configuration Property Designation",
                              "description":"A brief description of what the Configuration Property is and for what it is used."
                            },
                            "required":{  
                              "type":"boolean",
                              "title":"Configuration Property Required",
                              "description":"Determines whether the Configuration Property is required.",
                              "default":false
                            },
                            "value":{  
                              "title":"Configuration Property Value",
                              "description":"The json object corresponding to the type."
                            }
                          }
                        }
                      }
                    },
                    "output":{  
                      "type":"object",
                      "title":"Trigger Output",
                      "description":"Output object of the Trigger used to transfer data to other modules of the Rule.",
                      "additionalProperties":false,
                      "patternProperties":{  
                        "[A-Za-z0-9]+":{  
                          "type":"object",
                          "additionalProperties":false,
                          "required":[  
                            "type",
                            "reference"
                          ],
                          "properties":{  
                            "type":{  
                              "type":"string",
                              "title":"Output Type",
                              "description":"Fully qualified name of Java class."
                            },
                            "label":{  
                              "type":"string",
                              "title":"Output Label",
                              "description":"Short(one word) user friendly description of the Output."
                            },
                            "description":{  
                              "type":"string",
                              "title":"Output Designation",
                              "description":"A brief description of what the Output is and for what it is used."
                            },
                            "reference":{  
                              "type":"string",
                              "title":"Output Reference",
                              "description":"The reference defines what part of a complex data has to be used as value of this output."
                            }
                          }
                        }
                      }
                    }
                  }
                }
              ]
            }
          },
          "if":{  
            "type":"array",
            "minItems":0,
            "title":"IF Section",
            "description":"Contains definitions of Condition Modules of the rule.",
            "items":{  
              "oneOf":[  
                {  
                  "type":"object",
                  "title":"Condition Module",
                  "description":"Defines the condition which permit to proceed with the Rule execution.",
                  "additionalProperties":false,
                  "required":[  
                    "id",
                    "template.uid"
                  ],
                  "properties":{  
                    "id":{  
                      "type":"string",
                      "title":"Condition id",
                      "description":"Identifies uniquely the Module in scope of the Rule."
                    },
                    "template.uid":{  
                      "type":"string",
                      "title":"Condition Template uid",
                      "description":"Identifies the Template used for creation of the Condition. Must be unique in scope of concrete Rule definition."
                    },
                    "label":{  
                      "type":"string",
                      "title":"Condition Label",
                      "description":"Short(one word) user friendly description of the Condition."
                    },
                    "description":{  
                      "type":"string",
                      "title":"Condition Designation",
                      "description":"A brief description of what the Condition is and for what it is used."
                    },
                    "config":{  
                      "type":"object",
                      "title":"Condition Configurations",
                      "description":"Used to configure the Condition. Contains pairs of Configuration Property's name and its value."
                    },
                    "input":{  
                      "type":"object",
                      "title":"Condition Input",
                      "description":"Contains pairs of Input id and Output reference in format - ModuleID : OutputID."
                    }
                  }
                },
                {  
                  "type":"object",
                  "title":"Condition Module",
                  "description":"Defines the condition which permit to proceed with the Rule execution.",
                  "additionalProperties":false,
                  "required":[  
                    "id"
                  ],
                  "properties":{  
                    "id":{  
                      "type":"string",
                      "title":"Condition id",
                      "description":"Identifies uniquely the Module in scope of the Rule."
                    },
                    "label":{  
                      "type":"string",
                      "title":"Condition Label",
                      "description":"Short(one word) user friendly description of the Condition."
                    },
                    "description":{  
                      "type":"string",
                      "title":"Condition Designation",
                      "description":"A brief description of what the Condition is and for what it is used."
                    },
                    "config":{  
                      "type":"object",
                      "title":"Condition Configurations",
                      "description":"Used to configure the Condition. Contains meta info of Configuration Property and its value.",
                      "additionalProperties":false,
                      "patternProperties":{  
                        "[A-Za-z0-9]+":{  
                          "type":"object",
                          "title":"Condition Configuration Property",
                          "description":"Used to configure the Condition. Contains type of Configuration Property and its value.",
                          "required":[  
                            "type",
                            "value"
                          ],
                          "properties":{  
                            "type":{  
                              "type":"string",
                              "title":"Configuration Property Type",
                              "description":"Fully qualified name of Java class."
                            },
                            "label":{  
                              "type":"string",
                              "title":"Configuration Property Label",
                              "description":"Short(one word) user friendly description of the Configuration Property."
                            },
                            "description":{  
                              "type":"string",
                              "title":"Configuration Property Designation",
                              "description":"A brief description of what the Configuration Property is and for what it is used."
                            },
                            "required":{  
                              "type":"boolean",
                              "title":"Configuration Property Required",
                              "description":"Determines whether the Configuration Property is required.",
                              "default":false
                            },
                            "value":{  
                              "title":"Configuration Property Value",
                              "description":"The json object corresponding to the type."
                            }
                          }
                        }
                      }
                    },
                    "input":{  
                      "type":"object",
                      "title":"Condition Input",
                      "description":"Contains meta info of the Input and reference to Output in format - ModuleID : OutputID.",
                      "additionalProperties":false,
                      "patternProperties":{  
                        "[A-Za-z0-9]+":{  
                          "type":"object",
                          "additionalProperties":false,
                          "required":[  
                            "type",
                            "reference"
                          ],
                          "properties":{  
                            "type":{  
                              "type":"string",
                              "description":"Fully qualified name of Java class."
                            },
                            "label":{  
                              "type":"string",
                              "title":"Input Label",
                              "description":"Short(one word) user friendly description of the Input."
                            },
                            "description":{  
                              "type":"string",
                              "title":"Input Designation",
                              "description":"A brief description of what the Input is and for what it is used."
                            },
                            "reference":{  
                              "type":"string",
                              "title":"Input Reference",
                              "description":"The reference defines on which Output to refer, in format - ModuleID : OutputID."
                            },
                            "cached":{  
                              "type":"boolean",
                              "title":"Condition Input Cached",
                              "description":"Determines whether the Condition caches the input value.",
                              "default":false
                            }
                          }
                        }
                      }
                    }
                  }
                }
              ]
            }
          },
          "then":{  
            "type":"array",
            "minItems":1,
            "title":"THEN Section",
            "description":"Contains definitions of Action Modules of the rule.",
            "items":{  
              "oneOf":[  
                {  
                  "type":"object",
                  "title":"Action Module",
                  "description":"Defines an action which has to be executed by the Rule.",
                  "additionalProperties":false,
                  "required":[  
                    "id",
                    "template.uid"
                  ],
                  "properties":{  
                    "id":{  
                      "type":"string",
                      "title":"Action id",
                      "description":"Identifies uniquely the Module in scope of the Rule."
                    },
                    "template.uid":{  
                      "type":"string",
                      "title":"Action Template uid",
                      "description":"Identifies the Template used for creation of the Action. Must be unique in scope of concrete Rule definition."
                    },
                    "config":{  
                      "type":"object",
                      "title":"Action Configurations",
                      "description":"Used to configure the Action. Contains pairs of Configuration Property's name and its value."
                    },
                    "input":{  
                      "type":"object",
                      "title":"Action Input",
                      "description":"Contains pairs of Input id and Output reference in format - ModuleID : OutputID."
                    },
                    "output":{  
                      "type":"object",
                      "title":"Action Output",
                      "description":"Contains pairs of Output id and Output reference. The reference defines what part of a complex data has to be used as value of this output."
                    }
                  }
                },
                {  
                  "type":"object",
                  "title":"Action Module",
                  "description":"Defines an action which has to be executed by the Rule.",
                  "additionalProperties":false,
                  "required":[  
                    "id"
                  ],
                  "properties":{  
                    "id":{  
                      "type":"string",
                      "title":"Action id",
                      "description":"Identifies uniquely the Module in scope of the Rule."
                    },
                    "label":{  
                      "type":"string",
                      "title":"Action Label",
                      "description":"Short(one word) user friendly description of the Action."
                    },
                    "description":{  
                      "type":"string",
                      "title":"Action Designation",
                      "description":"A brief description of what the Action is and for what it is used."
                    },
                    "config":{  
                      "type":"object",
                      "title":"Action Configurations",
                      "description":"Used to configure the Action. Contains meta info of Configuration Property and its value.",
                      "additionalProperties":false,
                      "patternProperties":{  
                        "[A-Za-z0-9]+":{  
                          "type":"object",
                          "title":"Action Configuration Property",
                          "description":"Used to configure the Action. Contains type of Configuration Property and its value.",
                          "required":[  
                            "type",
                            "value"
                          ],
                          "properties":{  
                            "type":{  
                              "type":"string",
                              "title":"Configuration Property Type",
                              "description":"Fully qualified name of Java class."
                            },
                            "label":{  
                              "type":"string",
                              "title":"Configuration Property Label",
                              "description":"Short(one word) user friendly description of the Configuration Property."
                            },
                            "description":{  
                              "type":"string",
                              "title":"Configuration Property Designation",
                              "description":"A brief description of what the Configuration Property is and for what it is used."
                            },
                            "required":{  
                              "type":"boolean",
                              "title":"Configuration Property Required",
                              "description":"Determines whether the Configuration Property is required.",
                              "default":false
                            },
                            "value":{  
                              "title":"Configuration Property Value",
                              "description":"The json object corresponding to the type."
                            }
                          }
                        }
                      }
                    },
                    "input":{  
                      "type":"object",
                      "title":"Condition Input",
                      "description":"Contains meta info of the Input and reference to Output in format - ModuleID : OutputID.",
                      "additionalProperties":false,
                      "patternProperties":{  
                        "[A-Za-z0-9]+":{  
                          "type":"object",
                          "additionalProperties":false,
                          "required":[  
                            "type",
                            "reference"
                          ],
                          "properties":{  
                            "type":{  
                              "type":"string",
                              "title":"Input Type",
                              "description":"Fully qualified name of Java class."
                            },
                            "label":{  
                              "type":"string",
                              "title":"Input Label",
                              "description":"Short(one word) user friendly description of the Input."
                            },
                            "description":{  
                              "type":"string",
                              "title":"Input Designation",
                              "description":"A brief description of what the Input is and for what it is used."
                            },
                            "reference":{  
                              "type":"string",
                              "title":"Input Reference",
                              "description":"The reference defines on which Output to refer, in format - ModuleID : OutputID."
                            }
                          }
                        }
                      }
                    },
                    "output":{  
                      "type":"object",
                      "title":"Action Output",
                      "description":"Output object of the Action used to transfer data to other modules of the Rule.",
                      "additionalProperties":false,
                      "patternProperties":{  
                        "[A-Za-z0-9]+":{  
                          "type":"object",
                          "additionalProperties":false,
                          "required":[  
                            "type",
                            "reference"
                          ],
                          "properties":{  
                            "type":{  
                              "type":"string",
                              "title":"Output Type",
                              "description":"Fully qualified name of Java class."
                            },
                            "label":{  
                              "type":"string",
                              "title":"Output Label",
                              "description":"Short(one word) user friendly description of the Output."
                            },
                            "description":{  
                              "type":"string",
                              "title":"Output Designation",
                              "description":"A brief description of what the Output is and for what it is used."
                            },
                            "reference":{  
                              "type":"string",
                              "title":"Output Reference",
                              "description":"The reference defines what part of a complex data has to be used as value of this output."
                            }
                          }
                        }
                      }
                    }
                  }
                }
              ]
            }
          }
        }
      },
      {  
        "type":"object",
        "title":"Rule",
        "description":"Rule Definition",
        "additionalProperties":false,
        "required":[  
          "uid",
          "template.uid"
        ],
        "properties":{  
          "uid":{  
            "type":"string",
            "title":"Rule uid",
            "description":"Short (one word) user friendly description of the Rule. It must be unique."
          },
          "template.uid":{  
            "type":"string",
            "title":"Rule Template uid",
            "description":"User for description of the Rule. It must be unique in scope of TemplateAdmin."
          },
          "tags":{  
            "type":"array",
            "title":"Rule Tags",
            "description":"Non-hierarchical keywords or terms describing the Rule. They help to classify the rules and allow them to be found.",
            "minItems":1,
            "items":{  
              "type":"string"
            }
          },
          "description":{  
            "type":"string",
            "title":"Rule Description",
            "description":"A brief description of what the rule is and for what it is used."
          },
          "active":{  
            "type":"boolean",
            "title":"State",
            "description":"Shows if the pule is in active state or not.",
            "default":true
          },
          "config":{  
            "type":"object",
            "title":"Rule Configurations",
            "description":"Used to configure the Rule. Contains pairs of Configuration Property's name and its value."
          }
        }
      }
    ]
  }
}