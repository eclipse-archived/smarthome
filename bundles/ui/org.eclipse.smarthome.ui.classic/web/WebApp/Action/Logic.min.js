var WebApp=function(){function ToTop(h){h=h?h:0,_webapp.style.minHeight=_height+h+"px",_win.scrollTo(0,h)}function CalcEaseOut(s,w,dir,step,mn){return s+=Math.max((w-s)/step,mn||4),[s,(w+w*dir)/2-Math.min(s,w)*dir]}function ApplyMore(o){if(HasClass(o,"iMore")){var a=$$("a",o)[0];if(a&&a.title){var s=$$("span",a)[0]||a;o=s.innerHTML,s.innerHTML=a.title,a.title=o}}}function Buttons(s,k){if(_head){var h=_header;k=s?[]:k||[];for(var i=1;i<h.length;i++)Contains(i,k)||Display(h[i],s);with($h)Contains(BACK,k)||Display(h[BACK],s&&!h[LEFT]&&_historyPos),Contains(HOME,k)||Display(h[HOME],s&&!h[RIGHT]&&!_hold&&_historyPos>1)}}function AddLayerButtons(lay,ignore){if(_head)for(var a=$$("a",lay),p=$h.RIGHT,i=0;i<a.length&&p>=$h.LEFT;i++)!_header[p]||ignore?(HasToken(a[i].rel,"action")||HasToken(a[i].rel,"back"))&&(AddClass(a[i],p==$h.RIGHT?"iRightButton":"iLeftButton"),Display(a[i],1),_header[p--]=a[i],_head.appendChild(a[i--])):(i--,p--)}function DelLayerButtons(lay){if(_head)with($h){for(var i=LEFT;i<=RIGHT;i++){var a=_header[i];a&&(HasToken(a.rel,"action")||HasToken(a.rel,"back"))&&(Display(a,0),DelClass(a,i==RIGHT?"iRightButton":"iLeftButton"),lay.insertBefore(a,lay.firstChild))}_header[RIGHT]=$("waRightButton"),_header[LEFT]=$("waLeftButton")}}function AnimData(o){var u;return(u=getComputedStyle(o).backgroundImage)?(o._=1,/(.+?(\d+)x(\d+)x)(\d+)(.*)/.exec(u)):void 0}function AnimPrepare(o){var d,c,i;if(!(d=AnimData(o)))for(c=$$("*",o),i=0;i<c.length&&(o=c[i],!(d=AnimData(o)));i++);return d?[o,setInterval(AnimRun,d[2],[o,d[4],d[3],d[1]+"*"+d[5],new Image])]:d}function AnimRun(a){if(!a[5]){a[1]=parseInt(a[1])%parseInt(a[2])+1;var b=a[3].replace("*",a[1]);a[4].onload=function(){a[0]._&&(a[0].style.backgroundImage=b),a[5]=0},a[5]=a[4].src=b.substr(4,b.length-5)}}function NoTag(s){return s.replace(/<.+?>/g,"").replace(/^\s+|\s+$/g,"").replace(/\s{2,}/," ")}function NoEvent(e){e.preventDefault(),e.stopPropagation()}function IsAsync(o){return HasToken(o.rev,"async")||HasToken(o.rev,"async:np")}function IsMedia(o){return HasToken(o.rev,"media")}function IsDefined(o){return"undefined"!=typeof o}function Contains(o,a){return-1!=a.indexOf(o)}function $(i){return"string"==typeof i?document.getElementById(i):i}function $$(t,o){return(o||document).getElementsByTagName(t)}function $A(o,a){return o.getAttribute(a)||""}function XY(e){for(var x=0,y=0;e;)x+=e.offsetLeft,y+=e.offsetTop,e=e.offsetParent;return{x:x,y:y}}function WIN(){with(_win)return{x:pageXOffset,y:pageYOffset,w:innerWidth,h:innerHeight}}function NewScript(c){var s,h=$$("head")[0];s=NewItem("script"),s.type="text/javascript",s.textContent=c,h.appendChild(s)}function NewItem(t,c){var o=document.createElement(t);return c&&(o.innerHTML=c),o}function DelItem(p,c){p&&(c||(c=p,p=c.parentNode),p.removeChild(c))}function GetForm(o){return o=$(o),o&&"form"!=GetName(o)&&(o=GetParent(o,"form")),o}function GetLink(o){return"a"==GetName(o)?o:GetParent(o,"a")}function GetName(o){return o.localName.toLowerCase()}function HasToken(o,t){return o&&Contains(t,o.toLowerCase().split(" "))}function HasClass(o,c){return o&&Contains(c,GetClass(o))}function GetClass(o){return o.className.split(" ")}function AddClass(o,c){var h=HasClass(o,c);return h||(o.className+=" "+c),h}function DelClass(o){for(var c=GetClass(o),a=arguments,i=1;i<a.length;i++)Remove(c,a[i]);o.className=c.join(" ")}function GetParent(o,t){for(;(o=o.parentNode)&&(1!=o.nodeType||GetName(o)!=t););return o}function AnyOf(o,c){for(;(o=o.parentNode)&&(1!=o.nodeType||!HasClass(o,c)););return o}function Remove(a,e){var p=a.indexOf(e);-1!=p&&a.splice(p,1)}function GetText(o){o=o.childNodes;for(var i=0;i<o.length;i++)if(3==o[i].nodeType)return o[i].nodeValue.replace(/^\s+|\s+$/g,"");return null}function InitBlocks(){_webapp||(_webapp=$("WebApp")),_group||(_group=$("iGroup"));var i=$("iLoader");i&&!HasClass(i,"__lod")&&$pc.Loader(i,1)}function InitVars(){_header=[$("iHeader"),$("waBackButton"),$("waHomeButton"),$("waLeftButton"),$("waRightButton"),$("waHeadTitle")],_bdy=document.body,_bdo="rtl"==_bdy.dir?-1:1,_wkt=IsDefined(_bdy.style.webkitTransform)}function Display(o,s){(o=$(o))&&(o.style.display=s?"block":"none")}function Layer(o,s){(o=$(o))&&(o.style[1==_bdo?"left":"right"]=s?0:"",o.style.display=s?"block":"")}function AdjustLayer(o){if(o=o||GetActive()){var z=$$("div",o);z=z[z.length-1],z&&(HasClass(z,"iList")||HasClass(z,"iFull"))&&(z.style.minHeight=parseInt(_webapp.style.minHeight)-XY(z).y+"px")}}function Shadow(s,p){var o=$("__wa_shadow");o.style.top=p+"px",_webapp.style.position=s?"relative":"",Display(o,s)}function Historize(o,l){o&&(_history.splice(++_historyPos,_history.length),_history.push([o,l?"#_"+_def.substr(2):location.hash,_lastScroll]))}function PrepareClone(o){for(var s=$$("script",o);s.length;)DelItem(s[0]);return o}function Cleanup(){for(var s,i;_loader.length;)$pc.Loader(_loader[0][0],0);for(s=$$("li"),i=0;i<s.length;i++)DelClass(s[i],"__sel","__tap")}function ParseParams(s,np){var ed=s.indexOf("#_");if(-1==ed)return null;var rs="",bs=SplitURL(s);if(!np)for(var i=0;i<bs[1].length;i++)rs+="/"+bs[1][i].split("=").pop();return bs[2]+rs}function IsMobile(){return UA("iPhone")||UA("iPod")||UA("Aspen")}function UA(s){return Contains(s,navigator.userAgent)}function Resizer(){if(!_sliding){var m,h,o,w=WIN().w>=_maxh?_maxh:_maxw;w!=_width&&(_width=w,_webapp.className=w==_maxw?"portrait":"landscape",CallListeners("orientationchange")),(o=GetActive())&&(h=XY(o).y+o.offsetHeight),m=_width==_maxw?416:268,w=WIN().h,h=w>h?w:h,h=m>h?m:h,_height=h,_webapp.style.minHeight=h+"px",AdjustLayer()}}function Locator(){if(!_sliding&&_hold!=location.href){_hold=0;var act=GetActive();if(act)act=act.id;else{if(location.hash.length>0)return;act=_history[0][0]}var cur=_history[_historyPos][0];if(act!=cur){var i,pos=-1;for(i in _history)if(_history[i][0]==act){pos=parseInt(i);break}-1!=pos&&_historyPos>pos?InitSlide(cur,act,$d.L2R):SlideTo(act)}}}function CallListeners(evt,ctx,obj){var l=_handler[evt].length;if(0==l)return!0;for(var e={type:evt,target:obj||null,context:ctx||Explode(_history[_historyPos][1]),windowWidth:_width,windowHeight:_height},k=!0,i=0;l>i;i++)k=k&&(0==_handler[evt][i](e)?!1:!0);return k}function Init(){clearInterval(_tmp),InitBlocks(),InitVars(),InitForms(),InitTab(),InitHeader(),InitObj("__wa_shadow");var i=$("iLoader");if($pc.Loader(i,0),DelItem(i),$pc.Opener(_opener),_maxw=screen.width,_maxh=screen.height,_maxw>_maxh){var l=_maxh;_maxh=_maxw,_maxw=l}_def=GetLayers()[0].id,Historize(_def,1);var a=(GetActive()||"").id;with(a!=_def&&Historize(a),a||(a=_def,_opener("#")),Layer(a,1),AddLayerButtons($(a)),$h){var h=_header;Display(h[BACK],!h[LEFT]&&_historyPos),Display(h[HOME],!h[RIGHT]&&_historyPos>1&&a!=_def),h[BACK]&&(_baseBack=h[BACK].innerHTML),h[TITLE]&&(_baseTitle=h[TITLE].innerHTML,SetTitle())}setInterval(Locator,250),CallListeners("load"),_webapp.addEventListener("touchstart",new Function,!1),(_touch?_group:document).addEventListener(_touch?"touchmove":"scroll",ImagesListener,!1),Resizer(),ImagesShow(),DocumentTracker("DOMSubtreeModified"),DocumentTracker("resize"),$pc.HideBar()}function ShowTab(ul,li,h,ev){if(!HasClass(li,"__dis")&&!HasToken($$("a",li)[0].rel,"action")){for(var c,s,al=$$("li",ul),i=0;i<al.length;i++)c=al[i]==li,c&&(s=i),Display(ul.id+i,!h&&c),DelClass(al[i],"__act");AddClass(li,"__act"),ev&&CallListeners("tabchange",[s],ul)}}function ClearTransform(o){o&&(o.style.webkitTransform="")}function ListenClick(e){if(_sliding)return NoEvent(e);var o=e.target,n=GetName(o);if("label"==n){var f=$($A(o,"for"));return void(HasClass(f,"iToggle")&&setTimeout(FlipCheck,1,f.previousSibling,1))}var li=GetParent(o,"li");if(li&&HasClass(li,"iRadio"))return AddClass(li,"__sel"),ShowRadio(li),_hold=location.href,SlideTo("wa__radio"),NoEvent(e);var a=GetLink(o);if(a&&li&&HasClass(li,"__dis"))return NoEvent(e);if(a&&a.onclick){var old=a.onclick;a.onclick=null;var val=old.call(a,e);if(setTimeout(function(){a.onclick=old},0),val===!1)return li&&(AddClass(li,HasClass(a,"iSide")?"__tap":"__sel"),Unselect(li)),NoEvent(e)}var ul=GetParent(o,"ul"),pr=ul?ul.parentNode:null,ax=a&&IsAsync(a);if(a&&ul&&HasClass(pr,"iTab")){var h,t;if(t=HasToken(a.rel,"action"),h=$(ul.id+"-loader"),Display(h,0),!t&&ax?(Display(h,1),$pc.Loader(h,1),BasicAsync(a,function(o){Display(h,0),$pc.Loader(h,0),Display(ShowAsync(o)[0],1),ShowTab(ul,li,0,1)})):h=t,ShowTab(ul,li,!!h,!ax),!t)return NoEvent(e)}if(a&&Contains(a.id,["waBackButton","waHomeButton"]))return"waBackButton"==a.id?$pc.Back():$pc.Home(),NoEvent(e);if(ul&&HasClass(ul,"iCheck")){if(ClickRadio(a,ul)!==!1){for(var al=$$("li",ul),i=0;i<al.length;i++)DelClass(al[i],"__act","__sel");AddClass(li,"__act __sel"),setTimeout(DelClass,1e3,li,"__sel")}return NoEvent(e)}if(ul&&!HasClass(li,"iMore")&&(HasClass(ul,"iMenu")||HasClass(pr,"iMenu")||HasClass(ul,"iList")||HasClass(pr,"iList"))&&a&&!HasClass(a,"iButton")){var c=AddClass(li,HasClass(a,"iSide")?"__tap":"__sel");if(ax)return c||BasicAsync(a),NoEvent(e)}var dv=AnyOf(o,"iMore");if(dv)return HasClass(dv,"__lod")||($pc.Loader(dv,1),ax&&BasicAsync(a)),NoEvent(e);if(a&&_dialog){if(HasToken(a.rel,"back"))return $pc.Form(_dialog,a),NoEvent(e);if(HasToken(a.rel,"action")){var f=GetForm(_dialog);if(f)return void f.onsubmit(e)}}return a&&IsMedia(a)?(Unselect(li),$pc.Player(a.href,a),NoEvent(e)):void(ax?(BasicAsync(a),NoEvent(e)):a&&!a.target&&(startsWith(a.href,"http:","https:","file:")&&(Forward(a.href),NoEvent(e)),Unselect(li)))}function Unselect(li){li&&setTimeout(DelClass,1e3,li,"__sel","__tap")}function startsWith(s1){var i,a=arguments;for(i=1;i<a.length;i++)if(0==s1.toLowerCase().indexOf(a[i]))return 1}function SlideTo(to){var h=_history[_historyPos][0];h!=to&&InitSlide(h,to)}function InitSlide(src,dst,dir){if(!_sliding){_sliding=1,AdjustView(),dst==_history[0][0]&&(_initialNav=history.length),dir=dir||$d.R2L,src=$(src),dst=$(dst);var h;if(_wkt&&_head&&(h=PrepareClone(_head.cloneNode(!0))),_prev=_historyPos,dir==$d.R2L)Historize(dst.id);else for(;_historyPos&&_history[--_historyPos][0]!=dst.id;);HideHeader(),DelLayerButtons(src),AddLayerButtons(dst),ShowHeader(),h&&_header[$h.HEAD].appendChild(h),SetBackButton(dir!=$d.R2L?"":(_hold?"":NoTag(src.title))||_baseBack),SetTitle(_hold?dst.title:null),DoSlide(src,dst,dir)}}function SetBackButton(txt){_header[$h.BACK]&&(!txt&&_historyPos&&(txt=NoTag($(_history[_historyPos-1][0]).title)||_baseBack),txt&&(_header[$h.BACK].innerHTML=txt))}function SlideInfo(m){var s=Explode(_history[_prev][1]),d=Explode(_history[_historyPos][1]),r=0>m&&_hold?["wa__radio"]:d;return[s,d,m,r]}function tr_iphone(t){return"translate3d("+t+",0,0)"}function tr_others(t){return"translateX("+t+")"}function TranslateX(o,t,i){o&&(t&&(t=_translator(t)),o.style.webkitTransitionProperty=i?"none":"",o.style.webkitTransform=t)}function GetTiming(o){return o?getComputedStyle(o,null).webkitTransitionDuration:"0s"}function GetHigherOf(){var r,t,i,j,a=arguments;for(r=0,i=0;i<a.length;i++)for(t=GetTiming(a[i]).split(","),j=0;j<t.length;j++)r=Math.max(r,1e3*parseFloat(t[j]));return r}function DoSlide(src,dst,dir){if(CallListeners("beginslide",SlideInfo(dir)),InitForms(dst),Layer(src,1),Layer(dst,1),!_wkt)return void EndSlide(src,dst,dir);var b=_group,w=_webapp,g=dir*_bdo;b.style.height=_height-b.offsetTop+"px",AddClass(w,"__ani"),TranslateX(src,"0",1),TranslateX(dst,-100*g+"%",1);var h,hcs,hos,tim=GetHigherOf(src,dst,_head,_header[$h.TITLE]);_head&&(h=_header[$h.HEAD].lastChild,hcs=h.style,hos=_head.style,hcs.opacity=1,hos.opacity=0,TranslateX(h,"0",1),TranslateX(_head,-20*g+"%",1),TranslateX(_header[$h.TITLE],(g==$d.R2L?60:-20)+"%",1)),setTimeout(function(){AdjustLayer(dst),TranslateX(dst,"0"),TranslateX(src,100*g+"%"),h&&(hcs.opacity=0,hos.opacity=1,TranslateX(h,30*g+"%"),TranslateX(_head,"0"),TranslateX(_header[$h.TITLE],"0")),setTimeout(function(){h&&DelItem(_header[$h.HEAD],h),DelClass(w,"__ani"),b.style.height="",EndSlide(src,dst,dir)},tim)},0)}function EndSlide(src,dst,dir){Cleanup(),Layer(src,0),_wkt&&(ClearTransform(dst),ClearTransform(src),ClearTransform(_head),ClearTransform(_header[$h.TITLE])),CallListeners("endslide",SlideInfo(dir)),_sliding=0,_prev=-1,Resizer(),setTimeout(AdjustView,0,dir==$d.L2R?_history[_historyPos+1][2]:null),setTimeout(ImagesShow,0)}function SetTitle(title){var o;(o=_header[$h.TITLE])&&(o.innerHTML=title||GetTitle(GetActive())||_baseTitle)}function HideHeader(){_dialog&&$pc.Form(_dialog),Display(_headView,0)}function ShowHeader(){Buttons(1)}function FlipCheck(o,dontChange){var c=o,i=$(c.title),txt=i.title.split("|");with(dontChange||i.click(),(i.disabled?AddClass:DelClass)(c,"__dis"),o=c.firstChild.nextSibling,c.lastChild)innerHTML=txt[i.checked?0:1],i.checked?(o.style.left="",o.style.right="-1px",AddClass(c,"__sel"),style.left=0,style.right=""):(o.style.left="-1px",o.style.right="",DelClass(c,"__sel"),style.left="",style.right=0)}function AdjustView(to){for(var h=to?to:Math.min(50,WIN().y),s=to?Math.max(1,to-50):1,d=to?-1:1;h>=s;){var z=CalcEaseOut(s,h,d,6,2);s=z[0],_win.scrollTo(0,z[1])}to||$pc.HideBar()}function Explode(loc){if(loc){var p=loc.indexOf("#_");if(-1!=p){loc=loc.substring(p+2).split("/");var id="wa"+loc[0];for(var i in loc)loc[i]=decodeURIComponent(loc[i]);return loc[0]=id,_o_acl&&!$(id)&&CreateLayer(id),$(id)?loc:[]}}return[]}function GetLayers(){var lay=[],src=_group.childNodes;for(var i in src)1==src[i].nodeType&&HasClass(src[i],"iLayer")&&lay.push(src[i]);return lay}function CreateLayer(i){var n=NewItem("div");return n.id=i,n.className="iLayer",_group.appendChild(n),n}function GetTitle(o){return!_historyPos&&_baseTitle?_baseTitle:o.title}function GetActive(){var h=location.hash;return $(h?Explode(h)[0]:_def)}function SetURL(url){var d=url.match(/[a-z]+:\/\/(.+:.*@)?([a-z0-9-\.]+)((:\d+)?\/.*)?/i);return _proxy&&d&&d[2]!=location.hostname?AddParam(_proxy,"__url",url):url}function SplitURL(u){var s,q,d;return s=u.replace(/&amp;/g,"&"),d=s.indexOf("#"),d=s.substr(-1!=d?d:s.length),s=s.substr(0,s.length-d.length),q=s.indexOf("?"),q=s.substr(-1!=q?q:s.length),s=s.substr(0,s.length-q.length),q=q?q.substr(1).split("&"):[],[s,q,d]}function AddParam(u,k,v){u=SplitURL(u);var q=u[1].filter(function(o){return o&&0!=o.indexOf(k+"=")});return q.push(k+"="+encodeURIComponent(v)),u[0]+"?"+q.join("&")+u[2]}function AddParams(u,q){return u=SplitURL(u),u[1].push(q),u[0]+"?"+u[1].join("&")+u[2]}function BasicAsync(item,cb,q){var o,u,i;i="object"==typeof item,u=i?item.href:item,o=GetParent(item,"li"),cb||(cb=DefaultCallback(u,HasToken(item.rev,"async:np"))),$pc.Request(u,q,cb,!0,o,i?item:null)}function DefaultCallback(i,np){return function(o){var u=i?ParseParams(i,np):null,g=ShowAsync(o);return g&&(g[1]||u)?Forward(g[1]||u):Cleanup(),null}}function ReadTextNodes(o){for(var nds=o.childNodes,txt="",y=0;y<nds.length;y++)txt+=nds[y].nodeValue;return txt}function Forward(l){_lastScroll=WIN().y,AdjustView(),_opener(l)}function Go(g){return"#_"+g.substr(2)}function ResetScroll(i){if("wa"==i.substr(0,2)){var p=_historyPos;for(p&&i==_history[0][0]&&(_history[1][2]=0);p&&_history[--p][0]!=i;);p&&(_history[p+1][2]=0)}}function ShowAsync(o){if(o.responseXML){o=o.responseXML.documentElement;var s,t,k,a=GetActive(),g=$$("go",o);g=1!=g.length?null:$A(g[0],"to");var f,p=$$("part",o);0==p.length&&(p=[o]);for(var z=0;z<p.length;z++){var dst=$$("destination",p[z])[0];if(!dst)break;var mod=$A(dst,"mode"),txt=ReadTextNodes($$("data",p[z])[0]),i=$A(dst,"zone");if("true"!=$A(dst,"create")&&!_o_acl||"wa"!=i.substr(0,2)||$(i)||CreateLayer(i),f=f||i,g=g||$A(dst,"go"),i=$(i||dst.firstChild.nodeValue),!i)break;!k&&a&&a.id==i.id&&(HideHeader(),DelLayerButtons(i),k=i),ResetScroll(i.id),SetContent(i,txt,mod)}t=$$("title",o);for(var n=0;n<t.length;n++){var s=$($A(t[n],"set"));s.title=ReadTextNodes(t[n]),a==s&&SetTitle()}k&&(AddLayerButtons(k),ShowHeader());var e=$$("script",o)[0];return e&&NewScript(ReadTextNodes(e)),InitForms(a),SetBackButton(),g==a&&(g=null),g||ImagesShow(),[f,g?Go(g):null]}throw"Invalid asynchronous response received."}function SetContent(o,c,m){if(c=ImagesParse(c),c=NewItem("div",c),c=c.cloneNode(!0),ImagesInit(c),"replace"==m||"append"==m)for("append"!=m&&(o.innerHTML="");c.hasChildNodes();)o.appendChild(c.firstChild);else{var p=o.parentNode,w="before"==m?o:o.nextSibling;for("self"==m&&DelItem(p,o);c.hasChildNodes();)p.insertBefore(c.firstChild,w)}}function __callback(o,cb,lr){if(4==o.readyState){var er,ld,ob;(ob=_ajax.filter(function(a){return o==a[0]})[0])&&(CallListeners("endasync",ob.pop(),ob[0]),Remove(_ajax,ob)),er=200!=o.status&&0!=o.status;try{cb&&(ld=cb(o,lr,DefaultCallback()))}catch(ex){er=ex,console.error(er)}lr&&($pc.Loader(lr,0),er&&DelClass(lr,"__sel","__tap"))}}function InitHeader(){var hd=_header[$h.HEAD];if(hd){var dv=NewItem("div");for(dv.style.opacity=1;hd.hasChildNodes();)dv.appendChild(hd.firstChild);hd.appendChild(dv),_head=dv,Display(dv,1),Display(_header[$h.TITLE],1)}}function InitTab(){for(var o=$$("ul"),i=0;i<o.length;i++){var p=o[i].parentNode;p&&HasClass(p,"iTab")&&(Display(o[i].id+"-loader",0),ShowTab(o[i],$$("li",o[i])[0]))}}function UpdateRadio(r,p){for(var j=0;j<r.length;j++)with(r[j])if("radio"==type&&(checked||getAttribute("checked"))){checked=!0,p=$$("span",p||GetParent(r[j],"li"))[0],p.innerHTML=GetText(parentNode);break}}function InitRadio(p){for(var o=$$("li",p),i=0;i<o.length;i++)if(HasClass(o[i],"iRadio")&&!HasClass(o[i],"__done")){var lnk=NewItem("a"),sel=NewItem("span"),inp=$$("input",o[i]);for(lnk.appendChild(sel);o[i].hasChildNodes();)lnk.appendChild(o[i].firstChild);o[i].appendChild(lnk),lnk.href="#",AddClass(o[i],"__done"),UpdateRadio(inp,o[i])}var s="wa__radio";$(s)||CreateLayer(s)}function ClickRadio(a,u){for(var p=_radio,x=$$("input",p),y=$$("a",u),i=0;i<y.length;i++)if(y[i]==a){if(x[i].disabled)return!1;var c=x[i].onclick;if(c&&c()===!1)return!1;x[i].checked=!0,UpdateRadio([x[i]]),"autoback"==$A(p,"value")&&setTimeout($pc.Back,0);break}}function ShowRadio(p){var o=$$("input",p),dv=NewItem("div"),ul=NewItem("ul");ul.className="iCheck",_radio=p;for(var i=0;i<o.length;i++)if("radio"==o[i].type){var li=NewItem("li"),a=NewItem("a",o[i].nextSibling.nodeValue);a.href="#",li.appendChild(a),ul.appendChild(li),o[i].checked&&AddClass(li,"__act"),o[i].disabled&&AddClass(li,"__dis")}dv.className="iMenu",dv.appendChild(ul),o=$("wa__radio"),o.firstChild&&DelItem(o,o.firstChild),o.title=GetText(p.firstChild),o.appendChild(dv)}function InitObj(i){var o=NewItem("div");return o.id=i,_webapp.appendChild(o),o}function InitCheck(p){for(var o=$$("input",p),i=0;i<o.length;i++)if("checkbox"==o[i].type&&HasClass(o[i],"iToggle")&&!HasClass(o[i],"__done")){o[i].id=o[i].id||"__"+Math.random(),o[i].title=o[i].title||"ON|OFF";var txt=o[i].title.split("|"),b1=NewItem("b","&nbsp;"),b2=NewItem("b"),i1=NewItem("i",txt[1]);b1.className="iToggle",b1.title=o[i].id,b1.appendChild(b2),b1.appendChild(i1),o[i].parentNode.insertBefore(b1,o[i]),b1.onclick=function(){FlipCheck(this)},FlipCheck(b1,1),AddClass(o[i],"__done")}}function IsViewable(o){var x11,x12,y11,y12,x21,x22,y21,y22,p=XY(o);return x11=p.x,y11=p.y,x12=x11+o.offsetWidth-1,y12=y11+o.offsetHeight-1,p=WIN(),x21=p.x,y21=p.y,x22=x21+p.w-1,y22=y21+p.h-1,!(x11>x22||x21>x12||y11>y22||y21>y12)}function InitForms(l){l=$(l)||GetActive(),InitCheck(l),InitRadio(l)}function ImagesParse(c){return _pil&&(c=c.replace(/(.*?<img.*?(\s|\t)*?)src(=.+?>.*?)/g,"$1$2load$3")),c}function ImagesInit(c){if(_pil)for(var p,tmp=$$("img",c),i=0;i<tmp.length;i++)(p=GetParent(tmp[i],"a"))&&(HasToken(p.rel,"action")||HasToken(p.rel,"back"))?ImagesLoad(tmp[i],1):tmp[i].src=_blank}function ImagesLoad(i,c){var o=$A(i,"load");o&&c&&(i.removeAttribute("load"),i.src=o)}function ImagesCheck(){_scrAmount-WIN().y==0&&(_scrID=clearInterval(_scrID),ImagesShow())}function ImagesShow(){if(_pil)for(var img=$$("img",GetActive()),i=0;i<img.length;i++)ImagesLoad(img[i],IsViewable(img[i]))}function ImagesListener(){_scrolled=1,_pil&&!_sliding&&(_scrolling||(_scrolling=!0,setTimeout(function(){_scrAmount=WIN().y,_scrolling=!1},500)),_scrID||(_scrID=setInterval(ImagesCheck,1e3)))}function DocumentTracker(s){addEventListener(s,Resizer,!1)}var _def,_headView,_head,_header,_webapp,_group,_bdo,_bdy,_maxw,_maxh,_scrID,_scrolling,_scrAmount,_opener,_radio,_wkt,_prev=-1,_historyPos=-1,_history=[],_loader=[],_ajax=[],_initialNav=history.length,_sliding=0,_hold=0,_baseTitle="",_baseBack="",_width=0,_height=0,_lastScroll=1,_dialog=null,_scrolled=1,_proxy="",_pil=0,_tmp=setInterval(InitBlocks,250),_win=window,_blank="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",_v2=!!document.getElementsByClassName&&UA("WebKit"),_touch=(!!navigator.standalone,IsDefined(_win.ontouchstart)&&!UA("Android")),_translator=_touch?tr_iphone:tr_others,_handler={};_handler.load=[],_handler.beginslide=[],_handler.endslide=[],_handler.beginasync=[],_handler.willasync=[],_handler.endasync=[],_handler.orientationchange=[],_handler.tabchange=[];var _o_acl=!1,d=document,$h={get HEAD(){return 0},get BACK(){return 1},get HOME(){return 2},get LEFT(){return 3},get RIGHT(){return 4},get TITLE(){return 5}},$d={get L2R(){return 1},get R2L(){return-1}};d.wa={get autoCreateLayer(){return _o_acl},set autoCreateLayer(v){_o_acl="true"==v||"yes"==v||v===!0},get header(){return $h},get direction(){return $d}},d.webapp=d.wa;var $pc={get Version(){return"v0.5.2"},Proxy:function(url){_proxy=url},Progressive:function(enable){_pil=enable},Opener:function(func){_opener=func?func:function(u){location=u}},Refresh:function(id){if(id!==!1){var o=$(id);o?"radio"==o.type?UpdateRadio([o]):"checkbox"==o.type&&FlipCheck(o.previousSibling,1):InitForms()}SetTitle(),SetBackButton(),Resizer()},HideBar:function(){return _scrolled&&IsMobile()&&(_scrolled=0,ToTop(1),setTimeout(ToTop,0)),!1},Header:function(show,what,keep){return ShowHeader(),-1!=keep&&Buttons(!show,keep),Display(_headView,0),_headView=$(what),Display(_headView,show),_header[$h.HEAD].style.zIndex=show?"":2,!1},Tab:function(id,active){var o=$(id);ShowTab(o,$$("li",o)[active])},AddEventListener:function(evt,handler){if(IsDefined(_handler[evt]))with(_handler[evt])-1==indexOf(handler)&&push(handler)},RemoveEventListener:function(evt,handler){if(IsDefined(_handler[evt]))with(_handler[evt])splice(lastIndexOf(handler),1)},Back:function(){return _hold?_hold=0:(_radio=null,history.length-_initialNav==_historyPos?history.back():_opener(_history[_historyPos-1][1]),!1)},Home:function(){return history.length-_initialNav==_historyPos?history.go(-_historyPos):_opener("#"),_hold=0},Form:function(frm,focus){var s,a,b,c,o,k,f,t,i;with(a=$(frm),b=$(_history[_historyPos][0]),s="block"!=a.style.display,f=GetForm(a),_header[$h.HEAD])t=offsetTop+offsetHeight;return s&&(a.style.top=t+"px"),f&&(k=f.onsubmit,f.onsubmit=s?function(e,b){return b?k:(e&&NoEvent(e),void(k&&k(e)===!1||$pc.Submit(this,null,e)))}:f.onsubmit(0,1)),Display(a,s),Shadow(s,t+a.offsetHeight),o=$$("legend",a)[0],SetTitle(s&&o?o.innerHTML:null),_dialog=s?a:null,s&&(c=a,a=b,b=c),DelLayerButtons(a),AddLayerButtons(b,s),s?($pc.Header(),focus&&(i=$$("input",f)[0])&&i.focus()):Buttons(!s),!1},Submit:function(frm){var f=GetForm(frm);if(f){var a=arguments[1],_=function(i,f){for(var q="",n=0;n<i.length;n++)i[n].blur(),i[n].name&&!i[n].disabled&&(f?f(i[n]):1)&&(q+="&"+i[n].name+"="+encodeURIComponent(i[n].value));return q},q=_($$("input",f),function(i){with(i)return Contains(type,["text","password","hidden","search"])||Contains(type,["radio","checkbox"])&&checked});q+=_($$("select",f)),q+=_($$("textarea",f)),q+="&"+(a&&a.id?a.id:"__submit")+"=1",q=q.substr(1);var u=$A(f,"action")||self.location.href;"post"!=$A(f,"method").toLowerCase()&&(u=AddParams(u,q),q=null),BasicAsync(u,null,q),_dialog&&$pc.Form(_dialog)}return!1},Postable:function(keys,values){for(var q="",i=1;i<values.length&&i<=keys.length;i++)q+="&"+keys[i-1]+"="+encodeURIComponent(values[i]);return q.replace(/&=/g,"&").substr(1)},Request:function(url,prms,cb,async,loader){if(_historyPos!==cb){var a=[url,prms];if(CallListeners("beginasync",a)){url=a[0],prms=a[1],cb=-1==cb?DefaultCallback():cb;var o=new XMLHttpRequest,c=function(){__callback(o,cb,loader)},m=prms?"POST":"GET";async=!!async,loader&&$pc.Loader(loader,1),_ajax.push([o,a]),url=AddParam(url,"__async","true"),_historyPos>=0&&(url=AddParam(url,"__source",_history[_historyPos][0])),url=SetURL(url),o.open(m,url,async),prms&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),CallListeners("willasync",a,o),o.onreadystatechange=async?c:null,o.send(prms),async||c()}else loader&&setTimeout(DelClass,100,loader,"__sel")}},Loader:function(obj,show){var o,h,f;return(o=$(obj))&&(h=HasClass(o,"__lod"),ApplyMore(o),show?(h&&$pc.Loader(obj,0),AddClass(o,"__lod"),_loader.push([o,AnimPrepare(o)])):h&&(DelClass(o,"__lod"),f=_loader.filter(function(f){return f[0]==o})[0],Remove(_loader,f),(f=f[1])&&(f[0]._=0,clearInterval(f[1]),f[0].style.backgroundImage=""))),h},Player:function(src){if(IsMobile()){_v2&&(location="#"+Math.random());var w=$("__wa_media"),o=NewItem("iframe");o.id="__wa_media",o.src=src,_webapp.appendChild(o),DelItem(w)}else _win.open(src);return!1},toString:function(){return"[WebApp.Net Framework]"}};return addEventListener("load",Init,!0),addEventListener("click",ListenClick,!0),$pc}(),WA=WebApp;